<launch>

  <node pkg="tf" type="static_transform_publisher" name="test_broadcaster" args="0.242 -0.002 0.325 -0.064 0.100 0.685 0.719 base_link plug_ground_truth 100" />

  <rosparam command="load" file="$(find pr2_plugs_core)/config/pr2_plugs_arm_controllers.yaml"/>
  <!-- Stop the existing controllers -->
  <node pkg="pr2_controller_manager" type="unspawner"
        name="controller_stopper" args="l_arm_controller r_arm_controller" />
  <!-- Start the plug controllers -->
  <node pkg="pr2_controller_manager" type="spawner" name="spawn_arm_controllers"
        args="r_arm_plugs_controller l_arm_plugs_controller" />
  <!-- Nodes on top of the controllers -->
  <group ns="r_arm_plugs_controller">
    <node name="joint_trajectory_action_node"
          pkg="joint_trajectory_action" type="joint_trajectory_action" />
  </group>
  <group ns="l_arm_plugs_controller"> 
    <node name="joint_trajectory_action_node" 
          pkg="joint_trajectory_action" type="joint_trajectory_action" />
  </group>



  <rosparam command="load" file="$(find pr2_plugs_actions)/config/arm_ik_r_arm.yaml"/>
  <node pkg="pr2_plugs_actions" type="arm_ik" name="arm_ik" output="screen" />

  <rosparam command="load" file="$(find pr2_plugs_actions)/config/move_and_grasp_r_arm.yaml"/>
  <node pkg="pr2_plugs_actions" type="move_and_grasp_plug" name="move_and_grasp_plug" output="screen" />
</launch>
